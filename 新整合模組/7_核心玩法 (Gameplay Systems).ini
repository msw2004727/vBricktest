(* ============================================================ *)
(* ==     åˆä½µæ¨¡çµ„ Part 7: æ ¸å¿ƒç©æ³• (Gameplay Systems)        == *)
(* ============================================================ *)

(* === Content from: âš”ï¸ æ­¦ä¿ æˆ°é¬¥æ¨¡çµ„ï¼ˆcombat_system_wuxia.mlï¼‰.ini === *)
[source: 1] # âš”ï¸ æ­¦ä¿ æˆ°é¬¥æ¨¡çµ„ï¼ˆcombat_system_wuxia.mlï¼‰

æ¨¡çµ„èªªæ˜ï¼š
æœ¬æ¨¡çµ„ç”¨æ–¼ç®¡ç†è§’è‰²é–“çš„æˆ°é¬¥äº’å‹•ï¼Œæ”¯æ´è¿‘æˆ°ã€é ç¨‹ã€å…§åŠŸã€æ‹›å¼æ‡‰ç”¨ï¼Œä¸¦æ•´åˆå±¬æ€§ã€è£å‚™ã€æŠ€èƒ½æ¨¡çµ„ç­‰è¦ç´ ï¼Œç¬¦åˆæ­¦ä¿ ä¸–ç•Œè§€é‚è¼¯ã€‚

---

## ğŸ“˜ æˆ°é¬¥æµç¨‹éšæ®µ

(* ç°¡åŒ–æµç¨‹ï¼Œå¯¦éš›åˆ¤å®šæ›´è¤‡é›œ *)
let combat_flow = [
  "ã€èµ·æ‰‹/å…ˆæ”»åˆ¤å®šã€‘: æ¯”è¼ƒé›™æ–¹æ•æ·(AGI)/è¼•åŠŸ/æ„ŸçŸ¥/ç‰¹æ®ŠæŠ€èƒ½/å·è¥²ç‹€æ…‹ï¼Œæ±ºå®šè¡Œå‹•é †åºã€‚";
  "ã€è¡Œå‹•é¸æ“‡ã€‘: è¼ªåˆ°è¡Œå‹•çš„è§’è‰²é¸æ“‡å‹•ä½œï¼ˆæ”»æ“Š/é˜²ç¦¦/ç§»å‹•/ä½¿ç”¨ç‰©å“/æ–½å±•æŠ€èƒ½/é€ƒè·‘ç­‰ï¼‰ã€‚";
  "ã€æ”»æ“Šåˆ¤å®šã€‘:";
  "  - é¸æ“‡æ‹›å¼/æ™®é€šæ”»æ“Šã€‚";
  "  - è¨ˆç®—å‘½ä¸­å€¼: `(æ”»æ“Šæ–¹[ç›¸é—œæŠ€èƒ½] + æ”»æ“Šæ–¹[AGI]/3 + æ­¦å™¨å‘½ä¸­ä¿®æ­£ + d20) vs (é˜²ç¦¦æ–¹[é–ƒé¿åŸºç¤] + é˜²ç¦¦æ–¹[è¼•åŠŸ]/2 + è£å‚™é–ƒé¿ä¿®æ­£ + d20)`ã€‚(å…¬å¼å¯èª¿æ•´)";
  "ã€é˜²ç¦¦åˆ¤å®šã€‘(è‹¥æ”»æ“Šæ–¹å‘½ä¸­æª¢å®šåˆæ­¥æˆåŠŸ):";
  "  - é˜²ç¦¦æ–¹é¸æ“‡åæ‡‰ (æ ¼æ“‹/é–ƒé¿/æ‹›æ¶/ç¡¬æŠ—)ã€‚";
  "  - è¨ˆç®—é˜²ç¦¦æˆåŠŸå€¼: `(é˜²ç¦¦æ–¹[å°æ‡‰æŠ€èƒ½] + é˜²ç¦¦æ–¹[AGIæˆ–STR]/4 + è£å‚™é˜²ç¦¦ä¿®æ­£ + d20)`ã€‚(å…¬å¼å¯èª¿æ•´)";
  "  - æ¯”è¼ƒå‘½ä¸­å€¼èˆ‡é˜²ç¦¦æˆåŠŸå€¼ï¼Œåˆ¤å®šæœ€çµ‚æ˜¯å¦å‘½ä¸­ä»¥åŠé˜²ç¦¦æ•ˆæœ(å®Œå…¨æ ¼æ“‹/éƒ¨åˆ†æ ¼æ“‹/é–ƒé¿æˆåŠŸ/æ‹›æ¶æˆåŠŸ/è¢«æ“Šä¸­)ã€‚";
  "ã€å‚·å®³è¨ˆç®—ã€‘(è‹¥å‘½ä¸­ä¸”æœªè¢«å®Œå…¨é˜²ç¦¦):";
  "  - åŸºç¤å‚·å®³: `(æ­¦å™¨é¢æ¿ + æ”»æ“Šæ–¹[STRæˆ–å…§åŠ›]/5 + æ‹›å¼å¨åŠ›åŠ æˆ)`ã€‚(å…¬å¼å¯èª¿æ•´)";
  "  - å‚·å®³æ¸›å…: `åŸºç¤å‚·å®³ * (1 - é˜²ç¦¦æ–¹è­·ç”²æ¸›å‚·ç‡) * (1 - é˜²ç¦¦æ–¹å…§åŠŸæ¸›å‚·ç‡?) * (1 - æ ¼æ“‹æ¸›å‚·ç‡?)`ã€‚";
  "  - æœ€çµ‚å‚·å®³æ‰£é™¤ HPã€‚";
  "ã€é™„åŠ æ•ˆæœè™•ç†ã€‘: æ ¹æ“šæ‹›å¼/æ­¦å™¨/æ¯’è—¥è§¸ç™¼ï¼ˆå…§å‚·/æµè¡€/ä¸­æ¯’/ç ´ç”²/ç‹€æ…‹æ•ˆæœç­‰ï¼‰ã€‚";
  "ã€ç‹€æ…‹æ›´æ–°ã€‘: æ›´æ–°é›™æ–¹ HP/MP/STA/SAN/ç‹€æ…‹/è£å‚™è€ä¹…ã€‚";
  "ã€å›åˆçµæŸ/ä¸‹ä¸€ä½è¡Œå‹•ã€‘: æ ¹æ“šå…ˆæ”»é †åºè¼ªæ›ã€‚";
]
;;

---

## âš™ï¸ åˆ¤å®šé …ç›®ä¸€è¦½ (æ¦‚å¿µç´°åŒ–)

(* åˆ¤å®šç´°ç¯€éœ€åœ¨ AI åŸ·è¡Œæ™‚æ ¹æ“šå…¬å¼è¨ˆç®— *)
let combat_checks_overview = [
  ("å‘½ä¸­åˆ¤å®š", "ä¸»è¦å— [æ­¦å™¨æŠ€èƒ½]ã€[æ•æ·(AGI)]ã€[è¼•åŠŸ]ã€[è§€å¯Ÿ]ã€æ­¦å™¨/æ‹›å¼ç‰¹æ€§ã€è·é›¢ã€å…‰ç…§ã€ç›®æ¨™ç‹€æ…‹ å½±éŸ¿ã€‚");
  ("å‚·å®³åˆ¤å®š", "ä¸»è¦å— [æ­¦å™¨åŸºç¤å‚·å®³]ã€[åŠ›é‡(STR)/å…§åŠ›]ã€[æ­¦å™¨æŠ€èƒ½]ã€[æ‹›å¼å¨åŠ›]ã€å°æ–¹[è­·ç”²]ã€[å…§åŠŸè­·é«”]ã€[æ ¼æ“‹æ•ˆæœ] å½±éŸ¿ã€‚");
  ("ç ´ç”²/ç ´é˜²", "ä¾è³´ç‰¹å®šã€æ‹›å¼æ•ˆæœã€‘(å¦‚'ç ´ç”²')ã€æ­¦å™¨ã€é‹’åˆ©åº¦/ç©¿é€åŠ›ã€‘ã€æˆ–æ¥µé«˜çš„ã€åŠ›é‡/å…§åŠ›ã€‘ã€‚æˆåŠŸå‰‡é™ä½ç›®æ¨™å¾ŒçºŒé˜²ç¦¦åŠ›ã€‚");
  ("å…§å‚·åˆ¤å®š", "é€šå¸¸ç”±ç‰¹å®šã€å…§åŠŸæ‹›å¼ã€‘(å¦‚æŒåŠ›/æŒ‡åŠ›/éŸ³æ³¢åŠŸ)æˆ–æš´æ“Šè§¸ç™¼ã€‚éœ€é€²è¡Œé¡å¤–åˆ¤å®šï¼ˆå¦‚æ”»æ“Šæ–¹å…§åŠ› vs é˜²ç¦¦æ–¹å…§åŠ›/æ ¹éª¨/è­·é«”å…§åŠŸï¼‰ï¼ŒæˆåŠŸå‰‡æ–½åŠ ã€å…§åŠ›ç´Šäº‚ã€‘æˆ–æŒçºŒæ€§è² é¢æ•ˆæœã€‚");
  ("é–ƒé¿åˆ¤å®š", "ä¸»è¦å— [è¼•åŠŸ]ã€[æ•æ·(AGI)]ã€[æ­¥æ³•æŠ€èƒ½]ã€åœ°å½¢ã€é åˆ¤ï¼ˆè§€å¯Ÿ?ï¼‰å½±éŸ¿ã€‚");
  ("æ ¼æ“‹/æ‹›æ¶åˆ¤å®š", "ä¸»è¦å— [å…µå™¨æ ¼æ“‹æŠ€èƒ½]ã€[åŠ›é‡(STR)]ã€[æ­¦å™¨/ç›¾ç‰Œæ ¼æ“‹å€¼] å½±éŸ¿ã€‚æ‹›æ¶æˆåŠŸå¯èƒ½è§¸ç™¼åæ“Šã€‚");
  ("ç‰¹æ®Šæ•ˆæœæŠµæŠ—åˆ¤å®š", "å¦‚ä¸­æ¯’ã€éº»ç—ºã€ææ‡¼ç­‰ï¼Œé€šå¸¸éœ€è¦é€²è¡ŒåŸºæ–¼ [é«”è³ª/æ ¹éª¨]ã€[å…§åŠ›]ã€[æ„å¿—åŠ›/SAN] æˆ–ç‰¹å®š [æŠ—æ€§æŠ€èƒ½/ç‰©å“] çš„æŠµæŠ—æª¢å®šã€‚");
]
;;

---

## ğŸ”¥ æˆ°é¬¥æŠ€èƒ½èˆ‡ç‰¹æ•ˆç¯„ä¾‹

(* å…·é«”æŠ€èƒ½å®šç¾©åƒè¦‹ skills_proficiency.ml *)
let combat_skill_example = {
  skill_id = "example_qi_burst_palm";
  name_cn = "æ°£çˆ†æŒ (ç¯„ä¾‹)";
  prerequisites = ["å…§åŠ› 30+", "æŒæ³• Lv4+"];
  effects = ["æ“Šé€€ç›®æ¨™(è¿‘è·é›¢)", "é€ æˆå…§å‚·(ä½æ©Ÿç‡)", "å°éé‡‘å±¬è­·ç”²é€ æˆé¡å¤–æå®³(ä½æ©Ÿç‡)"];
  cost = "MP 30, STA 15";
  cooldown = "2 å›åˆ";
}
;;

ğŸ›¡ï¸ é˜²ç¦¦èˆ‡ååˆ¶é¸é …
```ml
let defensive_options = [
  "[æ ¼æ“‹] (Block)": "ä½¿ç”¨æ­¦å™¨/ç›¾ç‰Œç¡¬æ¥ï¼Œæ¶ˆè€—STAï¼ŒæˆåŠŸç‡å—STR/æŠ€èƒ½å½±éŸ¿ï¼Œå¯æ¸›å°‘éƒ¨åˆ†å‚·å®³ã€‚";
  "[é–ƒé¿] (Dodge)": ä¾é èº«æ³•ç§»å‹•èº²é–‹ï¼Œæ¶ˆè€—STA/MP(è‹¥ç”¨è¼•åŠŸ)ï¼ŒæˆåŠŸç‡å—AGI/è¼•åŠŸ/åœ°å½¢å½±éŸ¿ï¼ŒæˆåŠŸå‰‡å®Œå…¨ä¸å—å‚·å®³ã€‚";
  "[æ‹›æ¶] (Parry)": ç²¾æº–æ ¼æ“‹ï¼Œéœ€é«˜æŠ€èƒ½/é åˆ¤ï¼ŒæˆåŠŸå¯èƒ½å®Œå…¨æ ¼æ“‹ä¸¦ç²å¾—åæ“Šæ©Ÿæœƒã€‚";
  "[å¸åŠ›] (Yield/Redirect)": (éœ€ç‰¹å®šå…§åŠŸ) åŒ–è§£éƒ¨åˆ†å…§åŠ›æ”»æ“Šï¼Œæ¸›å°‘å…§å‚·ã€‚";
  "[ç¡¬æŠ—] (Tank)": ä¸åšé˜²ç¦¦ï¼Œä¾é è­·ç”²/é«”é­„æ‰¿å—å‚·å®³ã€‚";
]
;;

let counter_options = [
  "[åæ“Š] (Counter-Attack)": "æˆåŠŸæ‹›æ¶/é–ƒé¿å¾Œè§¸ç™¼ï¼Œç«‹å³å°æ•µäººé€²è¡Œä¸€æ¬¡å¿«é€Ÿæ”»æ“Šã€‚";
  "[å€ŸåŠ›æ‰“åŠ›] (Borrow Force)": (éœ€ç‰¹æ®Šå…§åŠŸ) æˆåŠŸå¸åŠ›å¾Œï¼Œå°‡éƒ¨åˆ†æ”»æ“ŠåŠ›é‡åå½ˆçµ¦å°æ‰‹ã€‚";
]
;;

â¤ï¸ ç‹€æ…‹å½±éŸ¿æˆ°é¬¥
let status_effects_in_combat = [
  "ã€å…§å‚·ã€‘": "é™ä½MPæ¢å¾©/ä¸Šé™ï¼Œéƒ¨åˆ†å…§åŠŸæ‹›å¼ç„¡æ³•æ–½å±•æˆ–å¨åŠ›ä¸‹é™ï¼Œå¯èƒ½éš¨æ©Ÿå²”æ°£ã€‚";
  "ã€ä¸­æ¯’ã€‘": "æŒçºŒæå¤±HP/MP/SANï¼Œæˆ–é™ä½å±¬æ€§(STR/AGI/INT)ã€‚";
  "ã€æµè¡€ã€‘": "æŒçºŒæå¤±HPï¼Œä¸åŒ…ç´®æœƒåŠ åŠ‡ï¼Œå½±éŸ¿STAæ¢å¾©ã€‚";
  "ã€ç–²å‹ã€‘": "é™ä½å‘½ä¸­ã€é–ƒé¿ã€æ ¼æ“‹æˆåŠŸç‡ï¼Œå¢åŠ æŠ€èƒ½STA/MPæ¶ˆè€—ã€‚";
  "ã€ææ‡¼ã€‘": "é™ä½æ”»æ“Šæ„é¡˜ï¼Œå¢åŠ é€ƒè·‘æ©Ÿç‡ï¼Œæª¢å®šæˆåŠŸç‡ä¸‹é™ã€‚";
  "ã€æ†¤æ€’ã€‘": "æé«˜æ”»æ“ŠåŠ›/æ„é¡˜ï¼Ÿä½†é™ä½é˜²ç¦¦/ç†æ™ºåˆ¤æ–·ã€‚";
  "ã€å—å‚·éƒ¨ä½ã€‘": "(è‹¥å•Ÿç”¨éƒ¨ä½å‚·å®³) æ‰‹è‡‚å—å‚·å½±éŸ¿æ­¦å™¨ä½¿ç”¨ï¼Œè…¿éƒ¨å—å‚·å½±éŸ¿ç§»å‹•/é–ƒé¿ã€‚";
]
;;

ğŸ”— é—œè¯æ¨¡çµ„å»ºè­°
let combat_depends_on = [
  "character_attributes.ml";      (* å±¬æ€§å½±éŸ¿æ”»é˜²åˆ¤å®š *)
  "skills_proficiency.ml";        (* æŠ€èƒ½ç­‰ç´šå½±éŸ¿æ‹›å¼/å‘½ä¸­/å‚·å®³ *)
  "equipment.ml";                 (* æ­¦å™¨/è­·ç”²ç›´æ¥å½±éŸ¿æ”»é˜²æ•¸å€¼ *)
  "disease_injury_system.ml";     (* è™•ç†æˆ°é¬¥é€ æˆçš„ç‹€æ…‹ *)
  "item_consumable_system.ml";    (* æˆ°é¬¥ä¸­ä½¿ç”¨è—¥å“/æš—å™¨ *)
  "world_settings.ml";            (* åœ°å½¢/å¤©æ°£å½±éŸ¿ *)
  "ai_behavior_system.ml";        (* NPC çš„æˆ°é¬¥æ±ºç­–å‚¾å‘ *)
  "emotion_psychology.ml";        (* æƒ…ç·’å½±éŸ¿æˆ°é¬¥è¡¨ç¾ *)
]
;;

ğŸ› ï¸ è£½ä½œèˆ‡æ¡é›†ç³»çµ±æ¨¡çµ„ (crafting_gathering_system.ml)
ğŸŒ³ è³‡æºæ¡é›†ç³»çµ± (Gathering System)
è³‡æºé»å®šç¾© (Resource Node Definition)
(* è³‡æºé»é¡å‹ *)
type resource_node_category = Mineral | Herb | Wood | Fish | Hunt | SpecialNode;;

(* ç”¢å‡ºç‰©å“çµæ§‹ *)
type node_output = {
  item_id: string;
  quantity_roll: string; (* e.g., "1d3", "1" *)
  probability: float; (* 0.0 - 1.0 *)
  is_primary: bool;
};;

(* è³‡æºé»å®šç¾© *)
type resource_node_definition = {
  node_id: string;
  name_cn: string;
  category: resource_node_category;
  locations: string list; (* å¯èƒ½å‡ºç¾çš„åœ°é»é¡å‹/å€åŸŸID *)
  required_tool_tags: string list; (* éœ€è¦çš„å·¥å…·æ¨™ç±¤ *)
  required_skill: string; (* éœ€è¦çš„æŠ€èƒ½ID *)
  min_skill_level: int;
  outputs: node_output list; (* ç”¢å‡ºåˆ—è¡¨ *)
  gather_time_minutes: int; (* æ¡é›†æ™‚é–“ (åˆ†é˜) *)
  respawn_time_minutes: int; (* é‡ç”Ÿæ™‚é–“ (åˆ†é˜) *)
  depletion_type: [`Count | `Time | `Never]; (* æ¯ç«­æ©Ÿåˆ¶ *)
  max_gather_count: int option; (* æœ€å¤§æ¡é›†æ¬¡æ•¸ *)
  special_conditions: string list option; (* ç‰¹æ®Šæ¢ä»¶ *)
};;

(* (æ¦‚å¿µæ€§) è³‡æºé»è³‡æ–™åº« *)
module ResourceNodeMap = Map.Make(String);;
let resource_node_database : resource_node_definition ResourceNodeMap.t ref = ref ResourceNodeMap.empty;;

(* ç¯„ä¾‹: éµç¤¦è„ˆ *)
let iron_vein_example : resource_node_definition = {
  node_id = "iron_vein_01"; name_cn = "éµç¤¦è„ˆ"; category = Mineral;
  locations = ["å±±è„ˆ"; "æ´ç©´"]; required_tool_tags = ["é¶´å˜´é‹¤"];
  required_skill = "mining_basic"; min_skill_level = 1;
  outputs = [
    { item_id="iron_ore"; quantity_roll="1d3"; probability=0.8; is_primary=true };
    { item_id="stone"; quantity_roll="1d6"; probability=1.0; is_primary=false };
    { item_id="geode_common"; quantity_roll="1"; probability=0.05; is_primary=false }
  ];
  gather_time_minutes = 15; respawn_time_minutes = 120; (* 2å°æ™‚é‡ç”Ÿ *)
  depletion_type = `Count; max_gather_count = Some 5; special_conditions = None;
};;
(* let () = resource_node_database := ResourceNodeMap.add iron_vein_example.node_id iron_vein_example !resource_node_database;; *)

æ¡é›†æµç¨‹ (Gathering Process)
let gathering_process = """
  1. ç©å®¶æŒ‡å®šç›®æ¨™è³‡æºé»ï¼Œç™¼å‡ºæ¡é›†æŒ‡ä»¤ã€‚
  2. æª¢æŸ¥ç©å®¶æ˜¯å¦è£å‚™äº†æ‰€éœ€å·¥å…·æ¨™ç±¤(required_tool_tags)å°æ‡‰çš„å·¥å…·ã€‚
  3. æª¢æŸ¥ç©å®¶æ‰€éœ€æŠ€èƒ½(required_skill)ç­‰ç´šæ˜¯å¦é”æ¨™(min_skill_level)ã€‚
  4. æª¢æŸ¥è³‡æºé»æ˜¯å¦å¯æ¡é›†ï¼ˆæœªæ¯ç«­/æ»¿è¶³ç‰¹æ®Šæ¢ä»¶ï¼‰ã€‚
  5. **æˆåŠŸç‡åˆ¤å®š(å¯é¸):** `åŸºç¤æˆåŠŸç‡(e.g., 90%) + (ç©å®¶æŠ€èƒ½ç­‰ç´š - æœ€ä½æŠ€èƒ½ç­‰ç´š) * 2% + å·¥å…·å“è³ªåŠ æˆ% + LCKåŠ æˆ%`ã€‚è‹¥å¤±æ•—ï¼Œå¯èƒ½ç„¡ç”¢å‡ºã€ç”¢å‡ºæ¸›åŠæˆ–æå£å·¥å…·ã€‚
  6. è‹¥æˆåŠŸï¼Œæ ¹æ“šç”¢å‡ºåˆ—è¡¨(outputs)çš„æ©Ÿç‡å’Œæ•¸é‡æ“²éª°ï¼Œæ·»åŠ ç‰©å“åˆ°åº«å­˜ï¼ˆæª¢æŸ¥è² é‡ï¼‰ã€‚
  7. æ¶ˆè€—æ¡é›†æ™‚é–“(gather_time_minutes)ã€‚
  8. æ›´æ–°è³‡æºé»ç‹€æ…‹ï¼ˆæ¸›å°‘å‰©é¤˜æ¬¡æ•¸/é€²å…¥é‡ç”Ÿè¨ˆæ™‚ï¼‰ã€‚
  9. æ ¹æ“šçµæœçµ¦äºˆæŠ€èƒ½ç¶“é©—å€¼(EXP)ã€‚
"""
;;

ğŸ”¨ ç‰©å“è£½ä½œç³»çµ± (Crafting System)
(* é…æ–¹æ‰€éœ€ææ–™çµæ§‹ *)
type recipe_material = {
  item_id: string;
  quantity: int;
};;

(* è£½ä½œé…æ–¹å®šç¾© *)
type crafting_recipe = {
  recipe_id: string;
  result_item_id: string;
  result_quantity: int;
  recipe_name: string option;
  required_skill: string; (* æŠ€èƒ½ID *)
  min_skill_level: int;
  materials: recipe_material list;
  required_station_tag: string option; (* éœ€è¦çš„å·¥ä½œç«™æ¨™ç±¤, e.g., "ç…‰è—¥çˆ", "éµåŒ é‹ª" *)
  crafting_time_minutes: int;
  learning_methods: string list option; (* å¦‚ä½•å­¸æœƒ: "æ›¸ç±", "NPCå‚³æˆ", "æŠ€èƒ½è§£é–", "æ¢ç´¢", "é ˜æ‚Ÿ" *)
  quality_affected_by_skill: bool; (* æˆå“å“è³ªæ˜¯å¦å—æŠ€èƒ½å½±éŸ¿ *)
};;

(* (æ¦‚å¿µæ€§) é…æ–¹è³‡æ–™åº« *)
module RecipeMap = Map.Make(String);;
let recipe_database : crafting_recipe RecipeMap.t ref = ref RecipeMap.empty;;

(* ç¯„ä¾‹: è£½ä½œé‡‘å‰µè—¥ *)
let recipe_jinchuangyao : crafting_recipe = {
  recipe_id = "recipe_jin_chuang_yao"; result_item_id = "jin_chuang_yao_01"; result_quantity = 1;
  recipe_name = Some "è£½ä½œé‡‘å‰µè—¥"; required_skill = "making_medicine"; min_skill_level = 2;
  materials = [ { item_id="herb_hemostatic"; quantity=3 }; { item_id="clean_water"; quantity=1 }; { item_id="linen_scrap"; quantity=1 } ];
  required_station_tag = Some "ç…‰è—¥çˆ"; crafting_time_minutes = 30;
  learning_methods = Some ["æ›¸ç±"; "NPCå‚³æˆ"]; quality_affected_by_skill = true;
};;
(* let () = recipe_database := RecipeMap.add recipe_jinchuangyao.recipe_id recipe_jinchuangyao !recipe_database;; *)

è£½ä½œæµç¨‹ (Crafting Process)
let crafting_process = """
  1. ç©å®¶é¸æ“‡è¦è£½ä½œçš„é…æ–¹ï¼ˆéœ€å·²å­¸æœƒï¼‰ã€‚
  2. æª¢æŸ¥ç©å®¶æ˜¯å¦è™•æ–¼æ‰€éœ€å·¥ä½œç«™(required_station_tag)é™„è¿‘ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚
  3. æª¢æŸ¥ç©å®¶æ‰€éœ€æŠ€èƒ½(required_skill)ç­‰ç´šæ˜¯å¦é”æ¨™(min_skill_level)ã€‚
  4. æª¢æŸ¥ç©å®¶åº«å­˜ä¸­æ˜¯å¦æœ‰è¶³å¤ çš„æ‰€éœ€ææ–™(materials)ã€‚
  5. æ¶ˆè€—æ‰€éœ€ææ–™ã€‚
  6. **æˆåŠŸç‡/å“è³ªåˆ¤å®š(å¯é¸):**
     - æˆåŠŸç‡: `åŸºç¤æˆåŠŸç‡ + (æŠ€èƒ½ç­‰ç´š - æœ€ä½ç­‰ç´š)*ä¿®æ­£ + å·¥å…·/å·¥ä½œç«™åŠ æˆ + INT/LCKå½±éŸ¿`ã€‚
     - å“è³ª: è‹¥`quality_affected_by_skill`ç‚ºçœŸï¼Œå‰‡æ ¹æ“š`æŠ€èƒ½ç­‰ç´š + LCK + éš¨æ©Ÿæ•¸`æ±ºå®šæˆå“å“è³ª(ç²—ç³™/æ™®é€š/ç²¾è‰¯...)ã€‚
     - å¤±æ•—å¯èƒ½ç„¡æˆå“ã€ææ–™æè€—ã€ç”¢ç”ŸåŠ£è³ªå“ã€‚
  7. è‹¥æˆåŠŸï¼Œå°‡æˆå“(result_item_id)åŠæ•¸é‡(result_quantity)ï¼ˆå¯èƒ½å¸¶å“è³ªæ¨™ç±¤ï¼‰æ·»åŠ åˆ°åº«å­˜ï¼ˆæª¢æŸ¥è² é‡ï¼‰ã€‚
  8. æ¶ˆè€—è£½ä½œæ™‚é–“(crafting_time_minutes)ã€‚
  9. æ ¹æ“šçµæœçµ¦äºˆæŠ€èƒ½ç¶“é©—å€¼(EXP)ã€‚
"""
;;

ğŸ”— ä¾è³´æ¨¡çµ„ (Dependencies)
let crafting_gathering_depends_on = [
  "item_consumable_system.ml";    (* æä¾›ææ–™ã€å·¥å…·ã€æˆå“å®šç¾© *)
  "skills_proficiency.ml";        (* æä¾›è£½ä½œ/æ¡é›†æŠ€èƒ½ç­‰ç´šã€æ¥æ”¶ç¶“é©— *)
  "world_settings.ml";            (* è³‡æºé»åˆ†å¸ƒã€æ™‚é–“å½±éŸ¿é‡ç”Ÿ *)
  "character_attributes.ml";      (* å±¬æ€§å½±éŸ¿åˆ¤å®š *)
  "construction_settlement.ml";   (* å»ºé€ å·¥ä½œç«™ *)
  "quest_event_system.ml";        (* ä»»å‹™éœ€æ±‚/çå‹µé…æ–¹ *)
  "npc_stats_tracker.ml";         (* NPC æœå‹™/å‚³æˆ *)
  "inventory_system.ml";          (* èƒŒåŒ…/è² é‡ *)
]
;;

(* === End of Crafting & Gathering System definition === *)


(* === Content from: ğŸ’° ç¶“æ¿Ÿèˆ‡äº¤æ˜“ç³»çµ±æ¨¡çµ„ (economy_trading_system.ml).ini === *)

# ğŸ’° ç¶“æ¿Ÿèˆ‡äº¤æ˜“ç³»çµ±æ¨¡çµ„ (economy_trading_system.ml)

## ğŸ“˜ æ¨¡çµ„èªªæ˜
æœ¬æ¨¡çµ„è² è²¬å®šç¾©éŠæˆ²ä¸–ç•Œä¸­çš„è²¨å¹£é«”ç³»ã€ç‰©å“åƒ¹å€¼ã€äº¤æ˜“è¦å‰‡ä»¥åŠå½±éŸ¿äº¤æ˜“åƒ¹æ ¼çš„å„ç¨®å› ç´ ã€‚å®ƒæ—¨åœ¨æ¨¡æ“¬ä¸€å€‹åŸºç¤çš„ç¶“æ¿Ÿç’°å¢ƒï¼Œè®“ç©å®¶å¯ä»¥é€šéè²·è³£ç‰©å“ã€å®Œæˆä»»å‹™ã€æä¾›æœå‹™ç­‰æ–¹å¼èˆ‡ä¸–ç•Œé€²è¡Œç¶“æ¿Ÿäº’å‹•ã€‚

---

## ğŸª™ è²¨å¹£é«”ç³» (Currency System)
```ml
let currency_system = {
  main_unit = "å…© (Silver Liang)";
  secondary_unit = "æ–‡ (Copper Wen)";
  tertiary_unit = Some "é‡‘ (Gold)"; (* å¯é¸ *)
  conversion_rates = [("å…©", 1000.0, "æ–‡"); ("é‡‘", 10.0, "å…©")]; (* 1 å…© = 1000 æ–‡, 1 é‡‘ = 10 å…© *)
  storage_method = "CharacterStat"; (* è²¨å¹£è¨˜éŒ„åœ¨è§’è‰²ç‹€æ…‹ä¸­ï¼Œä¸ä½”èƒŒåŒ… *)
}
;;

ğŸ’² ç‰©å“åƒ¹å€¼èˆ‡å®šåƒ¹ (Item Value & Pricing)
let pricing_rules = {
  base_value_source = "item_definition.base_value (in Copper Wen)"; (* åŸºç¤åƒ¹å€¼ä¾†æºæ–¼ç‰©å“å®šç¾© *)
  merchant_markup_rate = (1.2, 1.5); (* å•†äººåŸºç¤åŠ åƒ¹ç‡ 120% ~ 150% *)
  merchant_purchase_rate = (0.5, 0.8); (* å•†äººåŸºç¤æ”¶è³¼ç‡ 50% ~ 80% *)

  purchase_price_formula = "`BaseValue * MarkupRate * (1 - RelationDiscount - ReputationDiscount - SkillDiscount) * RegionPriceIndex`";
  sell_price_formula = "`BaseValue * PurchaseRate * (1 + RelationBonus + ReputationBonus + SkillBonus) * RegionPriceIndex * DurabilityModifier * QualityModifier`";

  durability_modifier = "(CurrentDurability / MaxDurability)"; (* è€ä¹…åº¦ä¿®æ­£ *)
  quality_modifier = { (* å“è³ªä¿®æ­£ (ç¤ºä¾‹) *)
    Rough = 0.7; Common = 1.0; WellMade = 1.3; Rare = 2.0; Legendary = 5.0; Artifact = 10.0 (* æˆ–æ›´é«˜/ç„¡æ³•ä¼°åƒ¹ *)
  };
}
;;

ğŸª å•†äººèˆ‡äº¤æ˜“è¦å‰‡ (Merchant & Trading Rules)
type merchant_profile = {
  npc_id: string;
  merchant_type: string; (* é›œè²¨/éµåŒ /è—¥å¸«... *)
  inventory_mode: [`Finite | `Infinite];
  inventory_items: (string * int) list option; (* (itemID, quantity) - è‹¥æœ‰é™æ¨¡å¼ *)
  restock_frequency_days: int option; (* åˆ·æ–°é€±æœŸ *)
  capital_mode: [`Finite | `Infinite];
  current_capital: int option; (* ç•¶å‰è³‡é‡‘ (æ–‡) - è‹¥æœ‰é™æ¨¡å¼ *)
  price_modifiers: (string * float) list option; (* (æ¢ä»¶æ¨™ç±¤, ä¿®æ­£ç‡) - ç‰¹æ®Šå•†äººçš„å€‹æ€§å®šåƒ¹ *)
};;

(* (æ¦‚å¿µæ€§) å•†äººæ•¸æ“šåº« *)
module MerchantMap = Map.Make(String);;
let merchant_database : merchant_profile MerchantMap.t ref = ref MerchantMap.empty;;

let trading_rules = {
  initiation = "èˆ‡æ¨™è¨˜ç‚ºã€å•†äººã€çš„NPCå°è©±ï¼Œé¸æ“‡äº¤æ˜“é¸é …ã€‚";
  interface_concept = "é¡¯ç¤º å•†äººå‡ºå”®åˆ—è¡¨(å«åƒ¹æ ¼) å’Œ ç©å®¶èƒŒåŒ…ä¸­å¯å‡ºå”®ç‰©å“åˆ—è¡¨(å«é è¨ˆæ”¶è³¼åƒ¹)ã€‚";
  transaction_process = "ç©å®¶ç¢ºèªè²·è³£ -> æª¢æŸ¥ç©å®¶/å•†äººè³‡é‡‘ -> è½‰ç§»ç‰©å“ -> æ‰£é™¤/å¢åŠ è²¨å¹£ã€‚";
}
;;

ğŸ“ˆ åƒ¹æ ¼å½±éŸ¿å› å­ (Price Influencing Factors)
let price_influencing_factors = [
  ("è¨åƒ¹é‚„åƒ¹æŠ€èƒ½", "ä¾†è‡ª skills_proficiency.mlã€‚æŠ€èƒ½ç­‰ç´šæä¾›è²·è³£åƒ¹æ ¼å„ªåŒ–ç™¾åˆ†æ¯”ã€‚å¯èƒ½éœ€å°è©±è§¸ç™¼ã€‚");
  ("è²æœ›/é™£ç‡Ÿé—œä¿‚", "ä¾†è‡ª reputation_systemã€‚èˆ‡å•†äººé™£ç‡Ÿé—œä¿‚å½±éŸ¿åƒ¹æ ¼(å‹å–„æŠ˜æ‰£/æ•µå°æ¼²åƒ¹/æ‹’çµ•)ã€‚");
  ("å€‹äººé—œä¿‚", "ä¾†è‡ª reputation_systemã€‚èˆ‡å•†äººNPCå¥½æ„Ÿåº¦å½±éŸ¿åƒ¹æ ¼ã€‚");
  ("ç‰©å“ç‹€æ…‹", "ä¾†è‡ª item/equipmentã€‚è€ä¹…åº¦/å“è³ªå½±éŸ¿å‡ºå”®åƒ¹æ ¼ã€‚");
  ("åœ°å€ç¶“æ¿Ÿ(å¯é¸)", "ä¾†è‡ª world_settings.mlã€‚ä¸åŒåœ°å€åŸºç¤ç‰©åƒ¹/ç‰¹ç”¢åƒ¹æ ¼ä¸åŒã€‚");
  ("ä¾›éœ€é—œä¿‚(å¯é¸)", "çŸ­æœŸå¤§é‡è²·è³£å½±éŸ¿åƒ¹æ ¼ï¼›ä¸–ç•Œäº‹ä»¶å½±éŸ¿ç‰¹å®šå•†å“åƒ¹æ ¼ã€‚");
]
;;

ğŸ’¬ ç©å®¶äº’å‹•æŒ‡ä»¤ (Player Interaction Commands)
let economy_player_commands = [
  "[äº¤æ˜“] [NPCåç¨±]";
  "[æŸ¥çœ‹å•†å“]";
  "[è³¼è²·] [ç‰©å“åç¨±] (æ•¸é‡)";
  "[æŸ¥çœ‹æ”¶è³¼]"; (* (å¯é¸) *)
  "[å‡ºå”®] [ç‰©å“åç¨±] (æ•¸é‡)";
  "[è¨åƒ¹é‚„åƒ¹]"; (* (å¯é¸) *)
]
;;

ğŸ’¸ ç¶“æ¿Ÿæ´»å‹•é¡å‹ (Economic Activities)
let economic_activities = [
  "ä»»å‹™å ±é…¬"; "æˆ°åˆ©å“å‡ºå”®"; "è²·è³£ç‰©å“";
  "æ”¯ä»˜æœå‹™è²»ç”¨ (ä½å®¿/æ²»ç™‚/ä¿®ç†/è¨“ç·´...)";
  "(å¯é¸) ç©å®¶æä¾›æœå‹™è³ºéŒ¢ (è­·é€/ä»£å·¥...)";
  "(å¯é¸) ç¨…æ”¶/è²»ç”¨"; "(å¯é¸) è³­åš/å°éŠæˆ²";
  "(å¯é¸) å·ç«Š/æ¶åŠ« (å½±éŸ¿é“å¾·/è²æœ›)";
]
;;

ğŸ”— ä¾è³´æ¨¡çµ„ (Dependencies)
let economy_depends_on = [
  "item_consumable_system.ml";    (* æä¾›ç‰©å“åŠå…¶åŸºç¤åƒ¹å€¼ *)
  "equipment.ml";                 (* æä¾›è£å‚™åŠå…¶åŸºç¤åƒ¹å€¼/ç‹€æ…‹ *)
  "skills_proficiency.ml";        (* è¨åƒ¹é‚„åƒ¹æŠ€èƒ½ *)
  "reputation_system_comprehensive.ml"; (* è²æœ›/é™£ç‡Ÿ/å€‹äººé—œä¿‚ *)
  "npc_stats_tracker.ml";         (* å®šç¾©å•†äººèº«ä»½/åº«å­˜/è³‡é‡‘ *)
  "quest_event_system.ml";        (* ä»»å‹™å ±é…¬/æ¶‰åŠäº¤æ˜“çš„ä»»å‹™ *)
  "world_settings.ml";            (* åœ°å€ç¶“æ¿Ÿå·®ç•°/ä¸–ç•Œäº‹ä»¶ *)
  "character_attributes.ml";      (* è§’è‰²æŒæœ‰è²¨å¹£ *)
]
;;

(* === End of Economy & Trading System definition === *)


(* === Content from: ğŸ—ï¸ å»ºç¯‰èˆ‡æ“šé»æ¨¡çµ„ (construction_settlement.ml).ini === *)
[source: 132] # ğŸ—ï¸ å»ºç¯‰èˆ‡æ“šé»æ¨¡çµ„ (construction_settlement.ml)

## ğŸ“˜ æ¨¡çµ„èªªæ˜
æœ¬æ¨¡çµ„è®“ç©å®¶èƒ½å¤ å»ºé€ å»ºç¯‰ç‰©ã€å»ºç«‹æ“šé»ã€å‡ç´šè¨­æ–½ï¼Œä¸¦èˆ‡ä¸–ç•Œè³‡æºã€ç”Ÿç”¢ã€NPC æ´»å‹•äº’å‹•ã€‚é©åˆé•·æœŸç¶“ç‡Ÿå‹éŠæˆ²æˆ–é–‹æ”¾å¼ä¸–ç•Œæ¨¡æ“¬ã€‚(æ³¨æ„ï¼šç•¶å‰éŠæˆ²ä¸»è¦åœ¨é»‘é¢¨å¯¨ï¼Œæ­¤æ¨¡çµ„å¯èƒ½æ›´å¤šç”¨æ–¼æœªä¾†æ“´å±•æˆ–é»‘é¢¨å¯¨å…§éƒ¨è¨­æ–½æ”¹å–„)

---

## ğŸ§± å»ºç¯‰é‚è¼¯èˆ‡æ¢ä»¶
```ml
type building_definition = {
  building_id: string;
  name_cn: string;
  description: string;
  category: string; (* e.g., "åŸºç¤", "ç”Ÿç”¢", "é˜²ç¦¦", "ç”Ÿæ´»", "ç‰¹æ®Š" *)
  build_requirements: {
    materials: (string * int) list; (* (itemID, quantity) *)
    tools: string list option; (* éœ€è¦çš„å·¥å…·æ¨™ç±¤ *)
    skill: (string * int) option; (* (æŠ€èƒ½ID, æœ€ä½ç­‰ç´š) *)
    location_tags: string list; (* å…è¨±å»ºé€ çš„åœ°é»æ¨™ç±¤, e.g., ["å¹³åœ°", "å¯¨å…§ç©ºåœ°"] *)
    prerequisite_buildings: string list option; (* å‰ç½®å»ºç¯‰ID *)
  };
  build_time_hours: float; (* å»ºé€ æ‰€éœ€æ™‚é–“ (å°æ™‚) *)
  durability: float option; (* å»ºç¯‰è€ä¹…åº¦ *)
  upgrades_to: string option; (* å¯å‡ç´šæˆçš„å»ºç¯‰ID *)
  provides_functionality: string list; (* æä¾›çš„åŠŸèƒ½æ¨™ç±¤, e.g., ["ä¼‘æ¯é»", "å„²ç‰©", "å·¥ä½œç«™:ç…‰è—¥", "é˜²ç¦¦åŠ æˆ"] *)
  npc_interaction_point: bool; (* æ˜¯å¦å¯ä½œç‚ºNPCå·¥ä½œ/æ´»å‹•é» *)
};;

(* (æ¦‚å¿µæ€§) å»ºç¯‰è—åœ–è³‡æ–™åº« *)
module BuildingMap = Map.Make(String);;
let building_database : building_definition BuildingMap.t ref = ref BuildingMap.empty;;

(* ç¯„ä¾‹: ç°¡æ˜“æœ¨æ£š *)
let simple_wooden_shelter : building_definition = {
  building_id = "shelter_wood_simple"; name_cn = "ç°¡æ˜“æœ¨æ£š"; description = "ç”¨æœ¨é ­å’ŒèŒ…è‰æ­æˆçš„ç°¡æ˜“æ£šå±‹ï¼Œèƒ½å‹‰å¼·é®é¢¨æ“‹é›¨ã€‚"; category="åŸºç¤";
  build_requirements = { materials=[("wood_log", 10); ("plant_fiber", 5)]; tools=Some ["æ–§é ­"]; skill=Some ("crafting_basic", 1); location_tags=["å¹³åœ°"]; prerequisite_buildings=None };
  build_time_hours = 2.0; durability = Some 50.0; upgrades_to = Some "cottage_wood_basic";
  provides_functionality = ["ä¼‘æ¯é»(æ•ˆæœå·®)", "åŸºç¤åº‡è­·"]; npc_interaction_point = false;
};;
(* let () = building_database := BuildingMap.add simple_wooden_shelter.building_id simple_wooden_shelter !building_database;; *)

let construction_process = """
  1. ç©å®¶é¸æ“‡è—åœ–ï¼ŒæŒ‡å®šåœ°é»ã€‚
  2. æª¢æŸ¥åœ°é»æ˜¯å¦ç¬¦åˆè¦æ±‚(location_tags)ã€‚
  3. æª¢æŸ¥æ˜¯å¦æ»¿è¶³å‰ç½®å»ºç¯‰(prerequisite_buildings)è¦æ±‚ã€‚
  4. æª¢æŸ¥ç©å®¶æ˜¯å¦æ“æœ‰è¶³å¤ ææ–™(materials)å’Œæ‰€éœ€å·¥å…·(tools)ã€‚
  5. æª¢æŸ¥ç©å®¶æŠ€èƒ½(skill)æ˜¯å¦é”æ¨™ã€‚
  6. é–‹å§‹å»ºé€ ï¼Œæ¶ˆè€—ææ–™å’Œå»ºé€ æ™‚é–“(build_time_hours)ã€‚
  7. (å¯é¸) é€²è¡ŒæˆåŠŸç‡åˆ¤å®šï¼ˆåŸºæ–¼æŠ€èƒ½/å·¥å…·/å¤©æ°£ï¼‰ï¼Œå¤±æ•—å¯èƒ½æè€—ææ–™æˆ–å»¶é•·æ™‚é–“ã€‚
  8. å®Œæˆå¾Œï¼Œåœ¨æŒ‡å®šåœ°é»ç”Ÿæˆå»ºç¯‰å¯¦é«”ï¼Œå…·æœ‰ç›¸æ‡‰åŠŸèƒ½å’Œè€ä¹…åº¦ã€‚
  9. çµ¦äºˆæŠ€èƒ½ç¶“é©—ã€‚
"""
;;

ğŸ•ï¸ å»ºç¯‰é¡å‹ç¯„ä¾‹
let building_type_examples = [
  "ã€åŸºç¤ã€‘: ç‡Ÿç«, ç°¡æ˜“æœ¨æ£š, ç±¬ç¬†";
  "ã€ç”Ÿç”¢ã€‘: å·¥ä½œæª¯, ç…‰è—¥çˆ, éµåŒ é‹ª(éœ€å‡ç´š), è¾²ç”°(å°å¡Š), ç•œæ¬„, ç‚­çª¯";
  "ã€é˜²ç¦¦ã€‘: æœ¨è³ªç®­å¡”, é™·é˜±å‘, åŠ å›ºçš„å¯¨ç‰†/å¤§é–€";
  "ã€ç”Ÿæ´»ã€‘: æœ¨å±‹, æ°´äº•, å„²è—ç®±/ç°¡æ˜“å€‰åº«, ä¼™æˆ¿è¨­æ–½";
  "ã€ç‰¹æ®Šã€‘: ç¥­å£‡?, è¨“ç·´å‡äºº/æ¢…èŠ±æ¨?, ä¿¡é´¿ç± ?";
]
;;

â›º æ“šé»ç®¡ç†ç³»çµ±ï¼ˆé¸ç”¨ - é‡å°é»‘é¢¨å¯¨æˆ–å…¶ä»–ç©å®¶å¯æ§æ“šé»ï¼‰
type settlement_profile_ref = { (* å¼•ç”¨ settlement_data.ml ä¸­çš„çµæ§‹ *)
  id : string; (* æ“šé»ID, e.g., "black_wind_fortress" *)
  (* ... å¼•ç”¨ settlement_data.ml ä¸­å®šç¾©çš„ ç‹€æ…‹/äººå£/å£«æ°£/éšç´š/è»äº‹/å»ºè¨­/è³‡æº/ä»»å‹™ ç­‰å­—æ®µ ... *)
};;

let settlement_management_rules = {
  status_tracking: "éœ€è¦å®šæœŸæ›´æ–°æ“šé»å…§çš„äººå£ã€è³‡æºæ¶ˆè€—/ç”¢å‡ºã€å£«æ°£ã€å»ºç¯‰ç‹€æ…‹ã€ä»»å‹™é€²åº¦ç­‰ (åƒè€ƒ settlement_data.ml)";
  npc_assignment: "ç©å®¶å¯ä»¥æŒ‡æ´¾æ“æœ‰ç‰¹å®šæŠ€èƒ½çš„NPCåˆ°å°æ‡‰åŠŸèƒ½çš„å»ºç¯‰å·¥ä½œï¼ˆå¦‚æŒ‡æ´¾éµåŒ å»éµåŒ é‹ªï¼‰";
  resource_flow: "æ“šé»å…§çš„ç”Ÿç”¢å»ºç¯‰ï¼ˆè¾²ç”°/ç¤¦å ´/ä¼æœ¨å ´ï¼‰ç”¢å‡ºè³‡æºï¼Œç”Ÿæ´»/è»äº‹å»ºç¯‰æ¶ˆè€—è³‡æºï¼ˆé£Ÿç‰©/æœ¨æŸ´/ç¶­è­·è²»ï¼‰";
  defense_mechanics: "é˜²ç¦¦è¨­æ–½æä¾›é˜²ç¦¦åŠ å€¼ï¼›æ“šé»å¯èƒ½é­å—å¤–éƒ¨æ”»æ“Šï¼ˆè§¸ç™¼æˆ°é¬¥/æ”»åŸäº‹ä»¶ï¼‰ï¼Œæå£éœ€è¦ä¿®å¾©";
  development_path: "é€šéå»ºé€ /å‡ç´šå»ºç¯‰ã€æ‹›å‹Ÿäººæ‰ã€å®Œæˆæ“šé»ä»»å‹™ä¾†ç™¼å±•æ“šé»";
}
;;

âš™ï¸ ç³»çµ±äº’å‹•é‚è¼¯
let construction_interaction_logic = {
[source: 133]  building_maintenance: "å»ºç¯‰ç‰©æœ‰è€ä¹…åº¦ï¼Œæœƒéš¨æ™‚é–“ã€å¤©æ°£ã€ä½¿ç”¨æˆ–æ”»æ“Šè€Œæè€—ï¼Œéœ€æ¶ˆè€—ææ–™ä¿®ç†ã€‚";
  environmental_impact: "å¤©æ°£å½±éŸ¿å»ºç¯‰æ•ˆç‡ï¼ˆé›¨å¤©æ»…ç«ï¼‰æˆ–é€ æˆæå®³ï¼ˆé›·æ“Š/æš´é¢¨ï¼‰ã€‚";
  behavioral_impact: "å»ºç¯‰ç‹€æ…‹å½±éŸ¿è§’è‰²/NPCè¡Œç‚ºï¼ˆå¦‚ç„¡åºŠå°è‡´ç¡çœ è³ªé‡å·®ï¼Œç„¡å·¥ä½œç«™ç„¡æ³•è£½ä½œï¼‰ã€‚";
  player_commands: ["[å»ºé€ ]", "[æ‹†é™¤]", "[ä¿®ç†]", "[å‡ç´š]", "[æŸ¥çœ‹æ“šé»ç‹€æ³]", "[æŒ‡æ´¾NPCå·¥ä½œ]"];
}
;;

ğŸ”— å»ºè­°çµåˆæ¨¡çµ„
let construction_depends_on = [
  "world_settings.ml";            (* åœ°å½¢é™åˆ¶, æ™‚é–“/å¤©æ°£å½±éŸ¿ *)
  "skills_proficiency.ml";        (* å»ºç¯‰/è£½ä½œæŠ€èƒ½ *)
  "equipment.ml";                 (* éœ€è¦å·¥å…· *)
  "item_consumable_system.ml";    (* éœ€è¦å»ºç¯‰ææ–™ *)
  "survival_status.ml";           (* å»ºç¯‰æä¾›åº‡è­·/ä¼‘æ¯é» *)
  "quest_event_system.ml";        (* æ“šé»ç™¼å±•è§¸ç™¼ä»»å‹™/äº‹ä»¶ *)
  "npc_stats_tracker.ml";         (* NPCä½œç‚ºå‹å‹•åŠ›/ç®¡ç†è€… *)
  "ai_behavior_system.ml";        (* NPCèˆ‡å»ºç¯‰äº’å‹• *)
  "map_exploration_system.ml";    (* æ“šé»åœ¨åœ°åœ–ä¸Šçš„ä½ç½®å’Œç‹€æ…‹ *)
  "combat_system_wuxia.ml";       (* æ“šé»æ”»é˜²æˆ° *)
]
;;