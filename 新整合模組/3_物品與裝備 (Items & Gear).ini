(* ============================================================ *)
(* ==        åˆä½µæ¨¡çµ„ Part 3: ç‰©å“èˆ‡è£å‚™ (Items & Gear)       == *)
(* ============================================================ *)

(* === Content from: ğŸ§° è£å‚™ç³»çµ±æ¨¡çµ„ï¼ˆequipment.mlï¼‰.ini (Part 1: Equipment) === *)
[source: 196] # ğŸ§° è£å‚™ç³»çµ±æ¨¡çµ„ï¼ˆequipment.mlï¼‰

ğŸ“˜ æ¨¡çµ„èªªæ˜ï¼š
æœ¬æ¨¡çµ„ç®¡ç†æ‰€æœ‰å¯è£å‚™ç‰©å“ä¹‹äº’å‹•é‚è¼¯ï¼ŒåŒ…æ‹¬è£å‚™ä½ç½®ã€ä½¿ç”¨æ¢ä»¶ã€è€ä¹…æ©Ÿåˆ¶ã€å“è³ªã€é‡é‡é™åˆ¶èˆ‡æˆ°é¬¥è¯å‹•ç­‰ã€‚ç¢ºä¿è§’è‰²ç„¡æ³•æ†‘ç©ºå‰µé€ é“å…·æˆ–ç„¡è¦–çœŸå¯¦é™åˆ¶ä½¿ç”¨è£å‚™ã€‚

---

## âš™ï¸ è£å‚™åŸºæœ¬é‚è¼¯

let equipment_rules = {
  "ä½¿ç”¨é™åˆ¶" = [
    "æ‰€æœ‰è£å‚™å¿…é ˆå¯¦éš›å­˜åœ¨æ–¼è§’è‰²èº«ä¸Šæˆ–èƒŒåŒ…å…§æ–¹å¯ä½¿ç”¨";
    "éœ€æ˜ç¢ºåŸ·è¡Œã€è£å‚™ã€‘æŒ‡ä»¤æ‰èƒ½ç”Ÿæ•ˆ";
    "æˆ°é¬¥æ™‚æœªè£å‚™è¦–åŒç„¡æ³•ä½¿ç”¨è©²ç‰©å“"
  ];
  "äº’å‹•å‘½ä»¤" = {
    "[è£å‚™]" = "å¾èƒŒåŒ…æˆ–æ›è¼‰å€è£å‚™åˆ°æŒ‡å®šéƒ¨ä½";
    "[å–ä¸‹]" = "å°‡è£å‚™å¸ä¸‹ä¸¦ç§»è‡³èƒŒåŒ…";
    "[ä½¿ç”¨]" = "åŸ·è¡Œè£å‚™ç‰¹å®šè¡Œå‹•ï¼ˆéœ€å·²è£å‚™ï¼‰";
    "[ä¸Ÿæ£„]" = "å°‡è£å‚™æ°¸ä¹…ç§»é™¤ï¼ˆå¯è¨­å®šæ˜¯å¦å¯å›æ”¶ï¼‰"
  };
}
;;

---

## ğŸ§­ è£å‚™éƒ¨ä½åˆ†é¡

let equipment_slots = {
  "ä¸»æ‰‹" = ["å–®æ‰‹åŠ"; "åˆ€"; "æ–§"; "éŒ˜"; "åŒ•é¦–"; "å·¥å…·é¡"]; (* æ“´å……æ­¦å™¨é¡å‹ *)
  "å‰¯æ‰‹" = ["ç›¾ç‰Œ"; "ç«æŠŠ"; "å‰¯æ‰‹æ­¦å™¨(éœ€æŠ€èƒ½)"; "ç©ºæ‰‹(ç”¨æ–¼æ–½å±•éƒ¨åˆ†æ‹³è…³)"]; (* æ“´å…… *)
  "èº«é«”" = ["å…§ç”²/è¥¯è¡£"; "å¤–è¢/è¡£è¤²"; "ç›”ç”²(çš®ç”²/éµç”²/é‡ç”²)"]; (* ç´°åŒ– *)
  "é ­éƒ¨" = ["å¸½å­/é ­å·¾"; "é ­ç›”/è­·é ­"]; (* ç´°åŒ– *)
  "æ‰‹éƒ¨" = ["è­·è…•"; "æ‰‹å¥—"];
  "è…³éƒ¨" = ["é‹é´(è‰é‹/å¸ƒé‹/çš®é´)"]; (* ç´°åŒ– *)
  "é£¾å“" = ["æˆ’æŒ‡"; "é …éŠ"; "è­·ç¬¦"; "è…°å¸¶?"]; (* æ“´å…… *)
  "æ›è¼‰å€" = ["èƒŒå¾Œ(æ›è¼‰é•·å…µå™¨/å¼“/åŒ…è£¹)"; "è…°é–“(æ›è¼‰åˆ€åŠ/éŒ¢è¢‹/æ°´è¢‹/å·¥å…·è¢‹)"]; (* ç´°åŒ– *)
  "èƒŒåŒ…" = ["å„²å­˜æœªè£å‚™ç‰©å“ï¼ˆå–ç”¨æœ‰å»¶é²ï¼‰"];
}
;;

---

## ğŸ§± è€ä¹…åº¦èˆ‡æè€—ç³»çµ±

let equipment_durability = {
  "è€ä¹…ä¸Šé™" = 100.0; (* ä½¿ç”¨æµ®é»æ•¸æ›´ç²¾ç¢º *)
  "æè€—æ©Ÿåˆ¶" = [
[source: 197]    "ã€æ­¦å™¨ã€‘: æ¯æ¬¡æ”»æ“Šå‘½ä¸­/æ ¼æ“‹æ™‚ï¼Œæ ¹æ“šæ”»æ“Šå¼·åº¦ã€å°æ–¹è­·ç”²ã€æ­¦å™¨å“è³ªæè€—ã€‚ç‰¹æ®Šæ‹›å¼æ¶ˆè€—æ›´å¤§ã€‚";
    "ã€è­·ç”²/ç›¾ç‰Œã€‘: æ¯æ¬¡æˆåŠŸé˜²ç¦¦/æ‰¿å—å‚·å®³æ™‚ï¼Œæ ¹æ“šå‚·å®³é¡å‹ã€å¼·åº¦ã€è‡ªèº«å“è³ªæè€—ã€‚";
    "ã€å·¥å…·ã€‘: æ¯æ¬¡ä½¿ç”¨æ™‚ï¼Œæ ¹æ“šæ“ä½œé›£åº¦ã€å°è±¡æè³ªã€å·¥å…·å“è³ªæè€—ã€‚";
    "ã€è¡£ç‰©/é‹é´ã€‘: é•·æ™‚é–“ç©¿è‘—ã€æƒ¡åŠ£å¤©æ°£ã€åŠ‡çƒˆæ´»å‹•ã€å—å‚·æ™‚ç·©æ…¢æè€—ã€‚";
  ];
  "æè€—è¨ˆç®—(æ¦‚å¿µ)" = "åŸºç¤æè€—å€¼ * å¼·åº¦å› å­ * æè³ªå› å­ * (1 / å“è³ªå› å­)";
  "è€ä¹…ç‚º0" = "è£å‚™æå£ï¼Œå¤±å»ä¸»è¦åŠŸèƒ½ï¼ˆå¦‚æ­¦å™¨å‚·å®³å¤§æ¸›/ç„¡æ³•æ ¼æ“‹ï¼Œè­·ç”²å¤±æ•ˆï¼‰ï¼Œå¯èƒ½å¾¹åº•æ¯€å£ç„¡æ³•ä¿®å¾©ã€‚";
  "ä¿®ç†è¦å‰‡" = "éœ€ç‰¹å®š NPCï¼ˆéµåŒ /çš®åŒ /å·§åŒ ï¼‰ã€å·¥ä½œç«™ã€æ¶ˆè€—ææ–™ï¼ˆå¦‚é‡‘å±¬/çš®é©/æœ¨æ/ç£¨åˆ€çŸ³ï¼‰å’Œæ™‚é–“ã€‚ä¿®ç†æˆåŠŸç‡/æ•ˆæœå—æŠ€èƒ½ç­‰ç´šå’Œææ–™å½±éŸ¿ã€‚éƒ¨åˆ†ç¥å™¨æˆ–ç‰¹æ®Šç‰©å“å¯èƒ½ç„¡æ³•ä¿®ç†æˆ–éœ€è¦ç‰¹æ®Šæ–¹æ³•ã€‚";
}
;;

---

## ğŸª™ è£å‚™å“è³ªåˆ†ç´š

(* èˆ‡ item_consumable_system.ml å…±ç”¨å®šç¾©ï¼Œç¢ºä¿ä¸€è‡´ *)
type item_quality =
  | Rough     (* ç²—ç³™ *)
  | Common    (* æ™®é€š *)
  | WellMade  (* ç²¾è‰¯ *)
  | Rare      (* ç¨€æœ‰ *)
  | Legendary (* å‚³èªª *)
  | Artifact  (* ç¥å™¨ *)
;;

let equipment_quality_effects = {
  description = "å“è³ªè¶Šé«˜ï¼Œé€šå¸¸æ„å‘³è‘—...";
  effects = [
    "æ›´é«˜çš„åŸºç¤å±¬æ€§ (æ”»æ“ŠåŠ›ã€é˜²ç¦¦åŠ›ã€æ•ˆæœå€¼)";
    "æ›´é«˜çš„è€ä¹…åº¦ä¸Šé™å’Œæ›´æ…¢çš„æè€—é€Ÿåº¦";
    "æ›´ä½çš„é‡é‡ï¼Ÿ(è¦–æè³ª)";
    "å¯èƒ½é™„å¸¶é¡å¤–çš„ç‰¹æ®Šæ•ˆæœæˆ–å±¬æ€§åŠ æˆ";
    "æ›´é«˜çš„ä¿®ç†é›£åº¦å’Œæˆæœ¬";
    "æ›´é«˜çš„äº¤æ˜“åƒ¹å€¼";
  ];
}
;;

---

## ğŸš« ä½¿ç”¨æ¢ä»¶é™åˆ¶

let equipment_restrictions = {
  "è² é‡é™åˆ¶" = "è§’è‰²ç¸½è² é‡ï¼ˆèƒŒåŒ…+è£å‚™ï¼‰ä¸èƒ½è¶…éåŸºæ–¼åŠ›é‡(STR)è¨ˆç®—çš„æœ€å¤§è² é‡ä¸Šé™ (`inventory_system.ml` æˆ– `character_attributes.ml` å®šç¾©)";
  "æŠ€èƒ½éœ€æ±‚" = [
    "éƒ¨åˆ†é«˜ç´šæ­¦å™¨/è­·ç”²éœ€è¦å°æ‡‰çš„ã€å…µåˆƒ/è­·å…·ã€‘æŠ€èƒ½é”åˆ°ä¸€å®šç­‰ç´šæ‰èƒ½ç™¼æ®å…¨éƒ¨æ•ˆæœæˆ–é¿å…æ‡²ç½° (å¦‚æ”»æ“Šå¤±èª¤ç‡å¢åŠ )ã€‚";
    "ã€é›™æŒæ­¦å™¨ã€‘éœ€è¦å°ˆé–€çš„æŠ€èƒ½æ”¯æŒã€‚";
    "ã€é‡å‹ç›”ç”²ã€‘å¯èƒ½éœ€è¦é¡å¤–çš„ã€è² é‡è¨“ç·´ã€‘æˆ–é«˜åŠ›é‡æ‰èƒ½é¿å…æ•æ·æ‡²ç½°ã€‚";
  ];
  "é–€æ´¾/èº«ä»½é™åˆ¶" = [
    "ç‰¹å®šè£å‚™ç‚ºé–€æ´¾ç¨æœ‰ï¼ˆå¦‚æ‰“ç‹—æ£’ã€çœŸæ­¦åŠï¼‰ï¼Œéæœ¬é–€å¼Ÿå­ç„¡æ³•ä½¿ç”¨æˆ–ä½¿ç”¨æœƒå¼•ç™¼æ•µæ„ã€‚";
    "æŸäº›ç‰©å“å¯èƒ½éœ€è¦ç‰¹å®šèº«ä»½æˆ–åœ°ä½æ‰èƒ½è£å‚™ï¼ˆå¦‚å®˜æœã€æŒé–€ä¿¡ç‰©ï¼‰ã€‚";
  ];
  "ç‰¹æ®Š/ç¥å™¨é™åˆ¶" = [
    "ç¥å™¨é¡è£å‚™é€šå¸¸éœ€è¦å®Œæˆç‰¹å®šä»»å‹™ã€é€šéè€ƒé©—ã€æˆ–æ»¿è¶³ç‰¹æ®Šæ¢ä»¶ï¼ˆå¦‚è¡€è„ˆã€å…§åŠ›å±¬æ€§ã€é“å¾·å€¼ï¼‰æ‰èƒ½èªä¸»æˆ–æ¿€æ´»å…¶çœŸæ­£åŠ›é‡ã€‚";
  ];
  "é«”å‹/ç¨®æ—é™åˆ¶" = "(å¯é¸) æŸäº›è£å‚™å¯èƒ½åªé©åˆç‰¹å®šé«”å‹æˆ–ç¨®æ—ã€‚";
  "éƒ¨ä½é™åˆ¶" = "é›™æ‰‹æ­¦å™¨ä½”ç”¨ä¸»å‰¯æ‰‹ï¼›éƒ¨åˆ†å¤§å‹ç‰©å“åªèƒ½æ›è¼‰åœ¨èƒŒå¾Œç­‰ã€‚";
}
;;

---

## ğŸ¯ æˆ°é¬¥èˆ‡æ¨¡çµ„è¯å‹•

let equipment_module_integration = {
  "combat_system_wuxia.ml" = "è£å‚™å±¬æ€§ï¼ˆæ”»æ“ŠåŠ›ã€é˜²ç¦¦åŠ›ã€ç ´ç”²ã€æ ¼æ“‹å€¼ã€é€Ÿåº¦ä¿®æ­£ç­‰ï¼‰ç›´æ¥åƒèˆ‡æˆ°é¬¥è¨ˆç®—ï¼›æ­¦å™¨æ±ºå®šå¯ç”¨æ‹›å¼é¡å‹ï¼›ç‰¹æ®Šæ•ˆæœï¼ˆä¸­æ¯’ã€ç‡ƒç‡’ï¼‰é€šéè£å‚™è§¸ç™¼ã€‚";
  "skills_proficiency.ml" = "æŠ€èƒ½ç­‰ç´šå½±éŸ¿è£å‚™ä½¿ç”¨æ•ˆæœå’Œè§£é–æ¢ä»¶ï¼›ä½¿ç”¨è£å‚™å¯ä»¥ç²å¾—ç›¸é—œæŠ€èƒ½ç¶“é©—ã€‚";
  "npc_stats_tracker.ml" = "è¿½è¹¤è¨˜éŒ„ NPC çš„è£å‚™æƒ…æ³ï¼Œå½±éŸ¿å…¶æˆ°é¬¥åŠ›å’Œè¡Œç‚ºã€‚";
  "reputation_system_comprehensive.ml" = "ç‰¹å®šè£å‚™ï¼ˆå¦‚é–€æ´¾æœé£¾ã€å®˜æœã€è‘—åç¥å…µï¼‰æœƒå½±éŸ¿ NPC å°ç©å®¶çš„æ…‹åº¦å’Œé™£ç‡Ÿé—œä¿‚ã€‚";
  "inventory_system.ml" = "è£å‚™çš„ç²å–ã€å­˜æ”¾ã€é‡é‡è¨ˆç®—ã€‚";
  "crafting_gathering_system.ml" = "è£½ä½œå’Œä¿®ç†è£å‚™ã€‚";
}
;;

---

## ğŸ§© æ“´å……å»ºè­°æ¨¡çµ„æ¬„ä½ï¼ˆå¦‚æœªå•Ÿç”¨å¯ç•¥ï¼‰

let equipment_expansion_options = {
  binding_rules = ["æ‹¾å–ç¶å®š", "è£å‚™ç¶å®š", "ä»»å‹™ç¶å®š", "éˆé­‚ç¶å®š(ç¥å™¨?)"]; (* å½±éŸ¿äº¤æ˜“/ä¸Ÿæ£„ *)
  enchantment_slots = "å…è¨±åµŒå…¥ç¬¦æ–‡ã€å¯¶çŸ³æˆ–é€²è¡Œé™„é­”ï¼Œæä¾›é¡å¤–å±¬æ€§æˆ–ç‰¹æ•ˆã€‚";
  set_bonuses = "è£å‚™åŒä¸€å¥—è£çš„å¤šå€‹éƒ¨ä»¶å¯æ¿€æ´»é¡å¤–å¥—è£æ•ˆæœã€‚";
  weapon_effects = ["æµè¡€", "ä¸­æ¯’", "ç‡ƒç‡’", "å†°å‡", "éº»ç—º", "æ“Šé€€", "å¸è¡€", "ç ´ç”²", "å…§åŠ›æ“¾äº‚"]; (* å¯é€šéæ­¦å™¨è‡ªå¸¶æˆ–é™„é­”/æ·¬æ¯’å¯¦ç¾ *)
  appearance_customization = "(å¯é¸) å…è¨±æ›´æ›è£å‚™å¤–è§€è€Œä¸æ”¹è®Šå±¬æ€§ï¼ˆå¹»åŒ–ï¼‰ã€‚";
}
;;

(* === End of Equipment System definition === *)


(* === Content from: ğŸ§° è£å‚™ç³»çµ±æ¨¡çµ„ï¼ˆequipment.mlï¼‰.ini (Part 2: Item/Consumable System) === *)
(* Note: The source file seems to combine both, this marks the start of the second logical module *)

# ğŸ“¦ ç‰©å“èˆ‡é“å…·ç³»çµ±æ¨¡çµ„ (item_consumable_system.ml)

## ğŸ“˜ æ¨¡çµ„èªªæ˜
æœ¬æ¨¡çµ„è² è²¬ç®¡ç†éŠæˆ²ä¸­æ‰€æœ‰éè£å‚™é¡çš„ç‰©å“ï¼Œç‰¹åˆ¥æ˜¯æ¶ˆè€—å“ï¼ˆå¦‚ä¸¹è—¥ã€é£Ÿç‰©ã€ææ–™ã€ç¬¦å’’ç­‰ï¼‰ä»¥åŠä»»å‹™ç›¸é—œç‰©å“ã€‚å®ƒå®šç¾©äº†ç‰©å“çš„å±¬æ€§ã€æ•ˆæœã€å †ç–Šè¦å‰‡ã€ä½¿ç”¨é‚è¼¯ï¼Œä¸¦èˆ‡èƒŒåŒ…/åº«å­˜ç³»çµ±ç·Šå¯†é—œè¯ã€‚

---

## ğŸ“Œ ç‰©å“æ ¸å¿ƒå®šç¾© (Item Definition Structure)
```ml
(* åŸºæœ¬ç‰©å“é¡å‹ *)
type item_category =
  | Drug        (* è—¥å“ *)
  | Food        (* é£Ÿç‰© *)
  | Drink       (* é…’æ°´ *)
  | Material    (* ææ–™ *)
  | Junk        (* é›œç‰© *)
  | QuestItem   (* ä»»å‹™ç‰©å“ *)
  | Talisman    (* ç¬¦å’’ *)
  | Poison      (* æ¯’è—¥ *)
  | Book        (* æ›¸ç±/ç§˜ç± *)
  | Tool        (* å·¥å…· (éè£å‚™éƒ¨ä½çš„) *)
  | Container   (* å®¹å™¨ (å¦‚ç©ºç“¶å­) *)
  | CurrencyItem (* ç‰¹æ®Šè²¨å¹£ç‰©å“, å¦‚å¯¶çŸ³? *)
  | Unknown
;;

(* ç‰©å“æ•ˆæœå®šç¾© *)
type item_effect = {
  effect_type: string; (* e.g., "æ¢å¾©HP", "æ–½åŠ ç‹€æ…‹", "å­¸ç¿’æŠ€èƒ½", "è§¸ç™¼äº‹ä»¶" *)
  target: string;      (* e.g., "ä½¿ç”¨è€…", "ç›®æ¨™NPC", "å€åŸŸ" *)
  value: string option; (* æ•ˆæœæ•¸å€¼, e.g., "30", "50%", "æŠ€èƒ½ID" *)
  status: string option; (* ç‹€æ…‹åç¨±, e.g., "æ­¢è¡€", "ä¸­æ¯’" *)
  duration: string option; (* æ•ˆæœæŒçºŒæ™‚é–“, e.g., "2å›åˆ", "æ°¸ä¹…" *)
  condition: string option; (* è§¸ç™¼æ•ˆæœçš„æ¢ä»¶, e.g., "æˆ°é¬¥ä¸­" *)
};;

(* ç‰©å“å®šç¾©çµæ§‹ *)
type item_definition = {
  item_id: string; (* ç³»çµ±å…§éƒ¨å”¯ä¸€è­˜åˆ¥ç¢¼ *)
  name_cn: string; (* åç¨± *)
  category: item_category; (* é¡å‹ *)
  description: string; (* æè¿° *)
  weight: float; (* é‡é‡ *)
  stackable: bool; (* å¯å †ç–Š *)
  max_stack: int; (* æœ€å¤§å †ç–Š *)
  base_value: int; (* åŸºç¤åƒ¹å€¼ (æ–‡) *)
  quality: item_quality option; (* å“è³ª/ç¨€æœ‰åº¦ *)
  effects: item_effect list; (* æ•ˆæœåˆ—è¡¨ *)
  usage_conditions: string list; (* ä½¿ç”¨æ¢ä»¶ *)
  duration_rounds: int option; (* ç‰©å“æœ¬èº«æ•ˆæœæŒçºŒå›åˆ? (è¼ƒå°‘ç”¨) *)
  consumable_type: [`Yes | `No | `Charges of int]; (* æ¶ˆè€—æ€§ *)
  binding_type: string; (* ç¶å®šé¡å‹: "ç„¡", "æ‹¾å–", "è£å‚™", "ä»»å‹™" *)
  special_tags: string list; (* ç‰¹æ®Šæ¨™ç±¤ *)
  spoilage_mechanism: (string * int * string) option; (* (é€±æœŸå–®ä½, é€Ÿç‡, è®Šè³ªå¾Œç‰©å“ID) *)
};;

(* (æ¦‚å¿µæ€§) ç‰©å“è³‡æ–™åº« *)
module ItemMap = Map.Make(String);;
let item_database : item_definition ItemMap.t ref = ref ItemMap.empty;;

(* ç¯„ä¾‹: é‡‘å‰µè—¥ *)
let jinchuangyao_example : item_definition = {
  item_id = "jin_chuang_yao_01"; name_cn = "é‡‘å‰µè—¥"; category = Drug;
  description = "å¸¸è¦‹çš„å¤–å‚·è—¥ï¼Œç”¨æ–¼æ­¢è¡€ç”Ÿè‚Œã€‚"; weight = 0.1;
  stackable = true; max_stack = 20; base_value = 50; quality = Some Common;
  effects = [
    { effect_type="æ¢å¾©HP"; target="ä½¿ç”¨è€…"; value=Some "30"; status=None; duration=None; condition=None };
    { effect_type="æ–½åŠ ç‹€æ…‹"; target="ä½¿ç”¨è€…"; value=None; status=Some "æ­¢è¡€"; duration=Some "2å›åˆ"; condition=None }
  ];
  usage_conditions = ["ç‹€æ…‹ != æˆ°é¬¥ä¸­"]; (* å‡è¨­åŸºç¤é‡‘å‰µè—¥æˆ°é¬¥å¤–ä½¿ç”¨ *)
  duration_rounds = None; consumable_type = `Yes; binding_type = "ç„¡";
  special_tags = ["å¤–å‚·è—¥", "åŸºç¤è—¥å“"]; spoilage_mechanism = None;
};;
(* let () = item_database := ItemMap.add jinchuangyao_example.item_id jinchuangyao_example !item_database;; *)

(* ç¯„ä¾‹: ä¹¾ç³§ *)
let dry_ration_example : item_definition = {
  item_id = "ration_basic"; name_cn = "ä¹¾ç³§"; category = Food;
  description = "è€æ”¾çš„ä¹¾ç¡¬é£Ÿç‰©ï¼Œèƒ½å‹‰å¼·å¡«é£½è‚šå­ã€‚"; weight = 0.5;
  stackable = true; max_stack = 10; base_value = 5; quality = Some Common;
  effects = [
    { effect_type="æ¢å¾©é£¢é¤“"; target="ä½¿ç”¨è€…"; value=Some "30"; status=None; duration=None; condition=None };
    { effect_type="æ¢å¾©STA"; target="ä½¿ç”¨è€…"; value=Some "10"; status=None; duration=None; condition=None }; (* åƒæ±è¥¿ä¹Ÿèƒ½æ¢å¾©å°‘é‡é«”åŠ› *)
  ];
  usage_conditions = []; duration_rounds = None; consumable_type = `Yes; binding_type = "ç„¡";
  special_tags = ["é£Ÿç‰©"]; spoilage_mechanism = Some ("å¤©", 5, "spoiled_ration_01"); (* 5% æ¦‚ç‡æ¯å¤©è®Šè³ª *)
};;
(* let () = item_database := ItemMap.add dry_ration_example.item_id dry_ration_example !item_database;; *)

ğŸ’ èƒŒåŒ…/åº«å­˜ç³»çµ±è¦å‰‡ (Inventory System Rules)
let inventory_rules = {
  capacity_mode = "Weight"; (* å®¹é‡é™åˆ¶æ¨¡å¼: Weight | Slots | Combined *)
  calculate_max_weight = (fun (str: int) -> float_of_int str *. 1.5 +. 10.0); (* æœ€å¤§è² é‡å…¬å¼ (kg) = åŠ›é‡ * 1.5 + 10 *)
  max_slots = 20; (* (è‹¥ä½¿ç”¨æ ¼å­æ¨¡å¼) *)
  storage_format = "Map(itemID -> quantity)"; (* ç‰©å“å„²å­˜æ ¼å¼ *)
  currency_independent = true; (* è²¨å¹£é€šå¸¸ä¸ä½”è² é‡æˆ–æ ¼å­ *)
  overburdened_effects = [ (* è¶…é‡æ•ˆæœ *)
    ("è¶…é‡1ç´š (101-120%)", "æ•æ·(AGI) -2, ç§»å‹•é€Ÿåº¦é™ä½ 20%, ç„¡æ³•å¥”è·‘, é«”åŠ›æ¶ˆè€—å¢åŠ  15%");
    ("è¶…é‡2ç´š (121%+)", "æ•æ·(AGI) -5, ç§»å‹•é€Ÿåº¦é™ä½ 50%, ç„¡æ³•å¥”è·‘/è·³èº/æ½›è¡Œ, ç„¡æ³•é€²è¡Œæˆ°é¬¥å‹•ä½œ, é«”åŠ›æ¶ˆè€—å¢åŠ  30%");
  ];
}
;;

ğŸ–±ï¸ ç©å®¶äº’å‹•æŒ‡ä»¤ (Player Interaction Commands)
let item_player_commands = [
  "[æŸ¥çœ‹ç‰©å“æ¬„]"; "[æ•´ç†èƒŒåŒ…]";
  "[ä½¿ç”¨] [ç‰©å“åç¨±] (å° [ç›®æ¨™])"; (* ç›®æ¨™å¯é¸ï¼Œé è¨­è‡ªå·± *)
  "[ä¸Ÿæ£„] [ç‰©å“åç¨±] (æ•¸é‡)";
  "[çµ¦äºˆ] [ç‰©å“åç¨±] (æ•¸é‡) [NPCåç¨±]";
  "[æª¢æŸ¥] [ç‰©å“åç¨±]"; (* æŸ¥çœ‹è©³ç´°æè¿° *)
  "[æ‹†åˆ†å †ç–Š] [ç‰©å“åç¨±] [æ•¸é‡]";
  "[å…¨éƒ¨å­˜å…¥] [å®¹å™¨åç¨±]"; (* å¦‚å­˜å…¥å€‰åº« *)
  "[å…¨éƒ¨å–å‡º] [å®¹å™¨åç¨±]";
]
;;

âš™ï¸ ç‰©å“ä½¿ç”¨æµç¨‹ (Item Usage Flow)
let item_usage_flow = """
  1. æª¢æŸ¥ç‰©å“æ˜¯å¦åœ¨ç©å®¶åº«å­˜ä¸­ï¼Œæ•¸é‡æ˜¯å¦è¶³å¤ ã€‚
  2. æª¢æŸ¥æ˜¯å¦æ»¿è¶³æ‰€æœ‰ã€Œä½¿ç”¨æ¢ä»¶ã€(usage_conditions)ã€‚
  3. æª¢æŸ¥ç›®æ¨™æ˜¯å¦æœ‰æ•ˆ (è‹¥æ•ˆæœéœ€è¦æŒ‡å®šç›®æ¨™)ã€‚
  4. åŸ·è¡Œã€Œæ•ˆæœåˆ—è¡¨ã€(effects) ä¸­çš„æ‰€æœ‰æ•ˆæœï¼Œèª¿ç”¨ç›¸é—œæ¨¡çµ„è™•ç† (å¦‚æ¢å¾©HP -> character_attributes.ml, æ–½åŠ ç‹€æ…‹ -> disease_injury_system.ml)ã€‚
  5. è‹¥ç‰©å“æ˜¯æ¶ˆè€—æ€§çš„ (consumable_type)ï¼Œå¾åº«å­˜ä¸­ç§»é™¤æˆ–æ¸›å°‘æ•¸é‡/ä½¿ç”¨æ¬¡æ•¸ã€‚
  6. (å¯é¸) è§¸ç™¼ç›¸é—œæŠ€èƒ½ç¶“é©—å¢é•· (å¦‚ä½¿ç”¨è—¥å“+é†«è¡“EXP)ã€‚
  7. (å¯é¸) è§¸ç™¼ç‰©å“æˆ–åŒé¡ç‰©å“çš„å†·å»æ™‚é–“ã€‚
"""
;;

âœ¨ ç‰©å“æ•ˆæœé¡å‹ç¯„ä¾‹ (Example Effect Types)
let item_effect_type_examples = [
  "æ¢å¾©HP / MP / STA / SAN";
  "æ‰£é™¤HP / MP / STA / SAN";
  "æ–½åŠ ç‹€æ…‹ (ä¸­æ¯’, æ­¢è¡€, åŠ é€Ÿ, å…§åŠ›ç´Šäº‚, å±¬æ€§å¢å¼·...)";
  "ç§»é™¤ç‹€æ…‹ (è§£æ¯’, ç§»é™¤è² é¢æ•ˆæœ...)";
  "è§¸ç™¼äº‹ä»¶ / è§£é–æ©Ÿé—œ (ä½¿ç”¨é‘°åŒ™, ä¿¡ç‰©)";
  "å­¸ç¿’æŠ€èƒ½ / é…æ–¹ (é–±è®€ç§˜ç±/åœ–ç´™)";
  "æ”¹è®Šå±¬æ€§ (æ°¸ä¹… / æš«æ™‚)";
  "æ”¹è®Šé—œä¿‚ / è²æœ› (é€ç¦®)";
  "å½±éŸ¿ç”Ÿå­˜ç‹€æ…‹ (æ¸›å°‘é£¢é¤“/å£æ¸´)";
  "ä¿®å¾©è£å‚™è€ä¹…åº¦ (ä½¿ç”¨ä¿®ç†å·¥å…·)";
  "é»ç‡ƒ / ç†„æ»…ç«ç„° (ä½¿ç”¨ç«ç¨®/æ°´)";
  "ç”Ÿæˆå…‰ç…§";
]
;;

ğŸ”— ä¾è³´æ¨¡çµ„ (Dependencies)
let item_consumable_depends_on = [
  "character_attributes.ml";      (* HP/MP/å±¬æ€§/ç‹€æ…‹ *)
  "survival_status.ml";           (* é£¢é¤“/å£æ¸´/ç–²å‹ *)
  "disease_injury_system.ml";     (* è—¥å“/æ¯’è—¥/å‚·ç—…ç‹€æ…‹ *)
  "combat_system_wuxia.ml";       (* æˆ°é¬¥ä¸­ä½¿ç”¨ç‰©å“ *)
  "skills_proficiency.ml";        (* ä½¿ç”¨ç‰©å“çš„æŠ€èƒ½éœ€æ±‚/ç¶“é©—ç²å– *)
  "equipment.ml";                 (* é…åˆè£å‚™ä½¿ç”¨çš„ç‰©å“ *)
  "quest_event_system.ml";        (* ä»»å‹™ç‰©å“ *)
  "npc_stats_tracker.ml";         (* NPCç‰©å“æ¬„/é€ç¦®ç›®æ¨™ *)
  "world_settings.ml";            (* æ™‚é–“å½±éŸ¿è…å£ *)
  "reputation_system_comprehensive.ml"; (* é€ç¦®å½±éŸ¿é—œä¿‚/è²æœ› *)
  "emotion_psychology.ml";        (* é…’/è—¥ç‰©å½±éŸ¿æƒ…ç·’ *)
]
;;

(* ============================================================ *)
(* ==       åˆä½µæ¨¡çµ„ Part 3: ç‰©å“èˆ‡è£å‚™ (Items & Gear) çµæŸ   == *)
(* ============================================================ *)